#include "lolevel.h"
#include "platform.h"
#include "core.h"
#include "conf.h"

static long *nrflag = (long*)0xDDA8;  // -> ASM1989 11.06.2010 found at FFAE3478 in s95:FFAF9528  in sx210: FF972F10

#include "../../../generic/capt_seq.c"

//ASM1989 Started  :FF883630   in sx210: FF87EB90
void __attribute__((naked,noinline)) capt_seq_task() {
 asm volatile (
                 "STMFD   SP!, {R3-R7,LR}\n"
                 "LDR     R7, =0x3474\n"		// In sx200 was: 0x2B78
                 "LDR     R4, =0x3C5E4\n"		// In sx200 was: 0x15448
                 "MOV     R6, #0\n"
"loc_FF883640:\n"
                 "LDR     R0, [R7,#4]\n"
                 "MOV     R2, #0\n"
                 "MOV     R1, SP\n"
                 "BL      sub_FF83AE20\n"
                 "TST     R0, #1\n"
                 "BEQ     loc_FF88366C\n"
                 "LDR     R1, =0x43F\n"
                 "LDR     R0, =0xFF88319C\n"  //aSsshoottask_c
                 "BL      sub_FF81EB78\n"		//DebugAssert
                 "BL      sub_FF81EB30\n"		//eventproc_export_ExitTask
                 "LDMFD   SP!, {R3-R7,PC}\n"

"loc_FF88366C:\n"
                 "LDR     R0, [SP]\n"
                 "LDR     R1, [R0]\n"
                 "CMP     R1, #0x1F\n"
                 "ADDLS   PC, PC, R1,LSL#2\n"
                 "B       loc_FF883868\n"

"loc_FF883680:\n"
		"B	loc_FF883700\n"
"loc_FF883684:\n"
		"B	loc_FF883718\n"
"loc_FF883688:\n"
		"B	loc_FF883730\n"
"loc_FF88368C:\n"
		"B	loc_FF883744\n"
"loc_FF883690:\n"
		"B	loc_FF88373C\n"
"loc_FF883694:\n"
		"B	loc_FF883750\n"
"loc_FF883698:\n"
		"B	loc_FF883758\n"
"loc_FF88369C:\n"
		"B	loc_FF883760\n"
"loc_FF8836A0:\n"
		"B	loc_FF88376C\n"
"loc_FF8836A4:\n"
		"B	loc_FF883794\n"
"loc_FF8836A8:\n"
		"B	loc_FF883778\n"
"loc_FF8836AC:\n"
		"B	loc_FF883784\n"
"loc_FF8836B0:\n"
		"B	loc_FF88378C\n"
"loc_FF8836B4:\n"
		"B	loc_FF88379C\n"
"loc_FF8836B8:\n"
		"B	loc_FF8837A4\n"
"loc_FF8836BC:\n"
		"B	loc_FF8837AC\n"
"loc_FF8836C0:\n"
		"B	loc_FF8837B4\n"
"loc_FF8836C4:\n"
		"B	loc_FF8837BC\n"
"loc_FF8836C8:\n"
		"B	loc_FF8837C8\n"
"loc_FF8836CC:\n"
		"B	loc_FF8837D0\n"
"loc_FF8836D0:\n"
		"B	loc_FF8837D8\n"
"loc_FF8836D4:\n"
		"B	loc_FF8837E0\n"
"loc_FF8836D8:\n"
		"B	loc_FF8837E8\n"
"loc_FF8836DC:\n"
		"B	loc_FF8837F4\n"
"loc_FF8836E0:\n"
		"B	loc_FF8837FC\n"
"loc_FF8836E4:\n"
		"B	loc_FF883804\n"
"loc_FF8836E8:\n"
		"B	loc_FF88380C\n"
"loc_FF8836EC:\n"
		"B	loc_FF883814\n"
"loc_FF8836F0:\n"
		"B	loc_FF88381C\n"
"loc_FF8836F4:\n"
		"B	loc_FF883824\n"
"loc_FF8836F8:\n"
		"B	loc_FF883830\n"
"loc_FF8836FC:\n"
		"B	loc_FF883874\n"
"loc_FF883700:\n"
        "BL      shooting_expo_param_override\n"  // +       
        "BL      sub_FF883D88\n"
        "BL      shooting_expo_param_override\n"  // +
                 "BL      sub_FF880F24\n"

// copied over from SX10 don't know if we need it yet
 //  this code added to avoid some incorrect behavior if overrides are used.
 //  but it can cause some unexpected side effects. In this case, remove this code!

                 "MOV     R0, #0\n"
                 "STR     R0, [R4,#0x24]\n"  // fixes overrides  behavior at short shutter press
 //  end of my code
                 "LDR     R0, [R4,#0x24]\n"
                 "CMP     R0, #0\n"

//TIL HERE ixus1000 then changes a lot !!!

//all this should not be here:

	//"BLNE    sub_FF98ADD4\n"  // This is a potential my sub  like the FF972EFC but starting some line earlier

     "BLNE    sub_FF98ADD4_my\n"  // This is a potential my sub  like the FF972EFC but starting some line earlier
						//---------------->
//     "BL      capt_seq_hook_raw_here\n"      // +

	"B       loc_FF883874\n"
"loc_FF883718:\n"
	"LDRH    R1, [R4]\n"
	"SUB     R12, R1, #0x8200\n"
	"SUBS    R12, R12, #0x2E\n"
	"LDRNE   R0, [R0,#0xC]\n"
//	"BLNE    sub_FF98AB68\n"
    "BLNE    sub_FF98AB68_my\n"  // 100 D was 68
								//---------------->
//     "BL      capt_seq_hook_raw_here\n"      // +


	"B       loc_FF883874\n"
"loc_FF883730:\n"
	"MOV     R0, #1\n"
	"BL      sub_FF884044\n"
	"B       loc_FF883874\n"
"loc_FF88373C:\n"
	"BL      sub_FF883A28\n"
	"B       loc_FF883748\n"
"loc_FF883744:\n"
	"BL      sub_FF883D68\n"
"loc_FF883748:\n"
	"STR     R6, [R4,#0x24]\n"
	"B       loc_FF883874\n"
"loc_FF883750:\n"
	"BL      sub_FF883D70\n"
	"B       loc_FF883874\n"

"loc_FF883758:\n"
	"BL      sub_FF883F48\n"
	"B       loc_FF883770\n"
"loc_FF883760:\n"
	"LDR     R0, [R0,#0xC]\n"
	"BL      sub_FF98AE34\n"
	"B       loc_FF883874\n"
"loc_FF88376C:\n"
	"BL      sub_FF883FB4\n"
"loc_FF883770:\n"
	"BL      sub_FF880F24\n"
	"B       loc_FF883874\n"
"loc_FF883778:\n"
	"LDR     R0, [R4,#0x54]\n"
	"BL      sub_FF8846B0\n"
	"B       loc_FF883874\n"
"loc_FF883784:\n"
	"BL      sub_FF884A4C\n"
	"B       loc_FF883874\n"
"loc_FF88378C:\n"
	"BL      sub_FF884AB0\n"
	"B       loc_FF883874\n"
"loc_FF883794:\n"
	"BL      sub_FF883D68\n"
	"B       loc_FF883874\n"
"loc_FF88379C:\n"
	"BL      sub_FF98A1B4\n"
	"B       loc_FF883874\n"
"loc_FF8837A4:\n"
	"BL      sub_FF98A3C0\n"
	"B       loc_FF883874\n"
"loc_FF8837AC:\n"
	"BL      sub_FF98A464\n"
	"B       loc_FF883874\n"
"loc_FF8837B4:\n"
	"BL      sub_FF98A534\n"
	"B       loc_FF883874\n"
"loc_FF8837BC:\n"
	"MOV     R0, #0\n"
	"BL      sub_FF98A794\n"
	"B       loc_FF883874\n"
"loc_FF8837C8:\n"
	"BL      sub_FF98A8F0\n"
	"B       loc_FF883874\n"
"loc_FF8837D0:\n"
	"BL      sub_FF98A994\n"
	"B       loc_FF883874\n"
"loc_FF8837D8:\n"
	"BL      sub_FF98AA74\n"
	"B       loc_FF883874\n"
"loc_FF8837E0:\n"
	"BL      sub_FF88422C\n"
	"B       loc_FF883874\n"
"loc_FF8837E8:\n"
	"BL      sub_FF8842D8\n"
	"BL      sub_FF98BAF4\n"
	"B       loc_FF883874\n"
"loc_FF8837F4:\n"
	"BL      sub_FF98A600\n"
	"B       loc_FF883874\n"
"loc_FF8837FC:\n"
	"BL      sub_FF98A668\n"
	"B       loc_FF883874\n"
"loc_FF883804:\n"
	"BL      sub_FF98BBC4\n"
	"B       loc_FF883874\n"
"loc_FF88380C:\n"
	"BL      sub_FF838C50\n"
	"B       loc_FF883874\n"
"loc_FF883814:\n"
	"BL      sub_FF886DEC\n"
	"B       loc_FF883874\n"
"loc_FF88381C:\n"
	"BL      sub_FF886E74\n"
	"B       loc_FF883874\n"
"loc_FF883824:\n"
	"BL      sub_FF886ED0\n"
	"BL      sub_FF886E90\n"
	"B       loc_FF883874\n"
"loc_FF883830:\n"
	"MOV     R0, #1\n"
	"BL      sub_FF98B630\n"
	"MOV     R0, #1\n"
	"BL      sub_FF98B760\n"
	"LDRH    R0, [R4,#0x94]\n"
	"CMP     R0, #4\n"
	"LDRNEH  R0, [R4]\n"
	"SUBNE   R12, R0, #0x8200\n"
	"SUBNES  R12, R12, #0x2A\n"
	"BNE     loc_FF883874\n"
	"BL      sub_FF886E74\n"
	"BL      sub_FF8873E0\n"
	"BL      sub_FF8872F0\n"
	"B       loc_FF883874\n"
"loc_FF883868:\n"
	"LDR     R1, =0x591\n"
	"LDR     R0, =0xFF88319C\n"  //aSsshoottask_c
	"BL      sub_FF81EB78\n"   //DebugAssert
"loc_FF883874:\n"
	"LDR     R0, [SP]\n"
	"LDR     R1, [R0,#4]\n"
	"LDR     R0, [R7]\n"
	"BL      sub_FF88DB8C\n"
	"LDR     R5, [SP]\n"
	"LDR     R0, [R5,#8]\n"
	"CMP     R0, #0\n"
	"LDREQ   R1, =0x115\n"
	"LDREQ   R0, =0xFF88319C\n"  //aSsshoottask_c "ADREQ   R0, aSsshoottask_c ; "SsShootTask.c
	"BLEQ    sub_FF81EB78\n"   //DebugAssert
	"STR     R6, [R5,#8]\n"
	"B       loc_FF883640\n"






// looks like the nr stuff is sub_FFAE3304



	);
}		// ASM 1989  Done 11.11.10

//100F needs check


// For the 1st raw stuff
void __attribute__((naked,noinline)) sub_FF98ADD4_my() {
	asm volatile (
		"STMFD   SP!, {R4-R6,LR}\n"
		"BL      sub_FF882E6C\n"
		"MOV     R4, R0\n"
		"LDR     R0, =0x3C5E4\n"
		"LDR     R5, =0x7C8C\n"   //F: 0x7C94
		"LDR     R0, [R0,#0x24]\n"
		"MOV     R6, #1\n"
		"CMP     R0, #0\n"
		"BEQ     loc_FF98AE18\n"  //F: 1C
		"MOV     R0, #0xC\n"
		"BL      sub_FF88896C\n"
		"TST     R0, #1\n"
		"STRNE   R6, [R5]\n"
		"LDRNE   R0, [R4,#8]\n"
		"ORRNE   R0, R0, #0x40000000\n"
		"STRNE   R0, [R4,#8]\n"
		"LDMNEFD SP!, {R4-R6,PC}\n"
"loc_FF98AE18:\n"
		"MOV     R0, R4\n"
		"BL      sub_FFAE2D08\n"  //F: 0C
		"MOV     R0, R4\n"
		//"BL      sub_FFAE37CC\n"  //F: D0
		"BL      sub_FFAE37CC_my\n"
			//---------------->

//		"BL      capt_seq_hook_raw_here\n"		// added
		"TST     R0, #1\n"
		"TST     R0, #1\n"
		"STRNE   R6, [R5]\n"
		"LDMFD   SP!, {R4-R6,PC}\n"
	);
}

//First BL for the nr stuff
void __attribute__((naked,noinline)) sub_FFAE37CC_my() {
	asm volatile (
		"STMFD   SP!, {R2-R8,LR}\n"
		"MOV     R6, R0\n"
		"BL      sub_FF98B924\n"  //f: 28
		//"MOVL    R1, 0xFFFFFFFF\n"
		"MVN     R1, #0 \n"
		"BL      sub_FF88DBC0\n"
		"LDR     R0, =0xFFAE2F44\n"  //F: 48
		"MOV     R1, R6\n"
		"BL      sub_FF8C25A4\n"
		"MOV     R0, R6\n"
		"BL      sub_FFAE2E0C\n"  //F: 10
		"MOV     R0, R6\n"
//		"BL      sub_FFAE3304\n"  //F: 08
		"BL      sub_FFAE3304_my\n"
		"B       sub_FFAE37FC\n"  // continue func in firmware needs to be tested
			);
}


//NR stuff goes here needs to be tested
void __attribute__((naked,noinline)) sub_FFAE3304_my() {
	asm volatile (
				"STMFD   SP!, {R0-R8,LR}\n"
				"MOV     R4, R0\n"
				"MOV     R0, #0\n"
				"MOV     R7, #1\n"
				"LDR     R5, =0x3C6B4\n"
				"STR     R7, [SP,#0x8]\n"
				"STR     R0, [SP,#0xC]\n"
				"LDR     R6, =0x3C5E4\n"
				"LDR     R3, [R5]\n"
				"LDRSH   R2, [R5,#0xC]\n"
				"LDRSH   R1, [R5,#0xE]\n"
				"LDR     R0, [R6,#0x88]\n"
				"BL      sub_FF944FC8\n"
				"BL      sub_FF8682FC\n"			//GetCCDTemperature
				"LDR     R2, =0xDDA8\n"  //F:  DDB0
				"ADD     R3, SP, #0xC\n"
				"STRH    R0, [R4,#0xAC]\n"
				"STRD    R2, [SP]\n"
				"MOV     R1, R0\n"
				"LDRH    R0, [R6,#0x5C]\n"
				"LDRSH   R2, [R5,#0xC]\n"
				"ADD     R3, SP, #0x8\n"
				"BL      sub_FF98D568\n"  //NRTable.c  F: 6C
				//TESTing enable latter!
				//                 "BL      wait_until_remote_button_is_released\n"
                 "BL      capt_seq_hook_set_nr\n"
                 "B       sub_FFAE3360\n"                             // continue function in firmware
			);
}

// For the 2nd raw stuff
void __attribute__((naked,noinline)) sub_FF98AB68_my() {
	asm volatile (
			"STMFD   SP!, {R3-R7,LR}\n"
			"LDR     R5, =0x3C5E4\n"
			"MOV     R4, R0\n"
			"LDR     R0, [R5,#0x24]\n"
			"LDR     R6, =0x820C\n"
			"CMP     R0, #0\n"
			"MOV     R7, #0\n"
			"BNE     loc_FF98AC14\n"   //F: 18
			"LDR     R0, [R5,#0xB8]\n"
			"CMP     R0, #1\n"
			"BNE     loc_FF98ABF0\n"  //F: F4
			"LDRH    R0, [R5]\n"
			"CMP     R0, R6\n"
			"LDRNEH  R0, [R5,#0x92]\n"
			"CMPNE   R0, #3\n"
			"LDRNE   R0, [R4,#0xC]\n"
			"CMPNE   R0, #1\n"
			"BLS     loc_FF98ABC4\n"  //F:C8
			"BL      sub_FF833020\n"
			"TST     R0, #1\n"
			"BEQ     loc_FF98AC14\n" //F: 18
			"BL      sub_FF8889CC\n"
			"B       loc_FF98AC00\n" //F: 04 .....
"loc_FF98ABC4:\n"
			"MOV     R0, #0xC\n"
			"BL      sub_FF88896C\n"
			"TST     R0, #1\n"
			"BEQ     loc_FF98AC14\n"
			"MOV     R2, R4\n"
			"MOV     R1, #1\n"
			"MOV     R0, #1\n"
			"BL      sub_FF8818E8\n"
			"BL      sub_FF98B4B8\n"
			"BL      sub_FF881610\n"
			"LDMFD   SP!, {R3-R7,PC}\n"
"loc_FF98ABF0:\n"
			"MOV     R0, #0xC\n"
			"BL      sub_FF88896C\n"
			"TST     R0, #1\n"
			"BEQ     loc_FF98AC14\n"
"loc_FF98AC00:\n"
			"MOV     R2, R4\n"
			"MOV     R1, #1\n"
			"MOV     R0, #1\n"
			"BL      sub_FF8818E8\n"
			"LDMFD   SP!, {R3-R7,PC}\n"
"loc_FF98AC14:\n"
			"LDR     R0, [R4,#8]\n"
			"ORR     R0, R0, #1\n"
			"STR     R0, [R4,#8]\n"
			"LDRH    R0, [R5]\n"
			"CMP     R0, R6\n"
			"BEQ     loc_FF98ACA0\n"
			"LDRH    R0, [R5,#0x92]\n"
			"CMP     R0, #3\n"
			"BEQ     loc_FF98ACE8\n"
			"LDR     R0, [R4,#0xC]\n"
			"CMP     R0, #1\n"
			"BLS     loc_FF98ACAC\n"
			"LDRH    R0, [R5,#0x90]\n"
			"CMP     R0, #0\n"
			"BNE     loc_FF98ACE8\n"
			"LDRH    R0, [R5,#0x8C]\n"
			"CMP     R0, #2\n"
			"BNE     loc_FF98ACB8\n"
			"BL      sub_FF88439C\n"
			"LDRH    R0, [R5]\n"
			"CMP     R0, R6\n"
			"BEQ     loc_FF98ACA0\n"
			"LDRH    R0, [R5,#0x92]\n"
			"CMP     R0, #3\n"
			"BEQ     loc_FF98ACE8\n"
			"LDR     R0, [R4,#0xC]\n"
			"CMP     R0, #1\n"
			"BLS     loc_FF98ACAC\n"
			"LDRH    R0, [R5,#0x90]\n"
			"CMP     R0, #0\n"
			"BNE     loc_FF98ACE8\n"
			"LDRH    R0, [R5,#0x8C]\n"
			"CMP     R0, #2\n"
			"BEQ     loc_FF98ACE4\n"
			"B       loc_FF98ACB8\n"
"loc_FF98ACA0:\n"
			"LDRH    R0, [R5,#0x92]\n"
			"CMP     R0, #3\n"
			"BEQ     loc_FF98ACE8\n"
"loc_FF98ACAC:\n"
			"LDRH    R0, [R5,#0x90]\n"
			"CMP     R0, #0\n"
			"BNE     loc_FF98ACE8\n"
"loc_FF98ACB8:\n"
			"LDRH    R0, [R5,#0x8C]\n"
			"CMP     R0, #1\n"
			"BNE     loc_FF98ACE8\n"
			"LDRH    R0, [R5]\n"
			"CMP     R0, R6\n"
			"LDRNE   R0, [R4,#0xC]\n"
			"CMPNE   R0, #1\n"
			"BLS     loc_FF98ACE8\n"
			"LDR     R0, [R4,#0x10]\n"
			"CMP     R0, #1\n"
			"BNE     loc_FF98ACE8\n"
"loc_FF98ACE4:\n"
			"BL      sub_FF98BBFC\n"
"loc_FF98ACE8:\n"
			"BL      sub_FF98BBC4\n"
			"BL      sub_FF883D78\n"
			"LDR     R0, [R5,#0x24]\n"
			"CMP     R0, #0\n"
			"BNE     loc_FF98ADB4\n"
			"MOV     R0, R4\n"
			"BL      sub_FFAE2D80\n"
			"TST     R0, #1\n"
			"LDMNEFD SP!, {R3-R7,PC}\n"
			"MOV     R0, R4\n"
			"BL      sub_FFAE321C\n"
			"BL      sub_FF98B3F8\n"
			"LDR     R0, [R5,#0xB8]\n"
			"CMP     R0, #1\n"
			"BNE     loc_FF98AD40\n"
			"LDRH    R0, [R5]\n"
			"CMP     R0, R6\n"
			"LDRNEH  R0, [R5,#0x92]\n"
			"CMPNE   R0, #3\n"
			"LDRNE   R0, [R4,#0xC]\n"
			"CMPNE   R0, #1\n"
			"BHI     loc_FF98AD48\n"
"loc_FF98AD40:\n"
			"MOV     R0, #2\n"
			"BL      sub_FF87F4A4\n"
"loc_FF98AD48:\n"
			"LDRH    R0, [R5]\n"
			"SUB     R12, R0, #0x8200\n"
			"SUBS    R12, R12, #0x2D\n"
			"BNE     loc_FF98ADA4\n"
			"MOV     R5, #1\n"
			"MOV     R2, #2\n"
			"ADD     R0, R2, #0x15C\n"
			"MOV     R1, SP\n"
			"STR     R5, [SP]\n"
			"BL      sub_FF895DBC\n"  //GetPropertyCase
			"TST     R0, #1\n"
			"MOVNE   R1, #0xC3\n"
			"LDRNE	 R0, =0xFF98AEF8 \n"		//ADRNE   R0, aSscaptureseq_c ;
			"BLNE    sub_FF81EB78\n" 	//DebugAssert
			"LDRH    R0, [SP]\n"
			"CMP     R0, #1\n"
			"BLS     loc_FF98AD9C\n"
			"MOV     R0, R4\n"
			"STR     R5, [R4,#0xE4]\n"
			"BL      sub_FFAE3CDC\n"	//_SsGISCaptureSeq.c
			"B       loc_FF98ADAC\n"
"loc_FF98AD9C:\n"
			"MOV     R0, #0\n"
			"STR     R0, [R4,#0xE4]\n"
"loc_FF98ADA4:\n"
			"MOV     R0, R4\n"
			//"BL      sub_FFAE37CC\n"
		    "BL      sub_FFAE37CC_my\n"
					//---------------->
			"BL      capt_seq_hook_raw_here\n"		// added
"loc_FF98ADAC:\n"
			"MOV     R7, R0\n"
			"B       loc_FF98ADC4\n"
"loc_FF98ADB4:\n"
			"LDR     R0, =0x7C8C\n"
			"LDR     R0, [R0]\n"
			"CMP     R0, #0\n"
			"MOVNE   R7, #0x1D\n"
"loc_FF98ADC4:\n"
			"MOV     R1, R7\n"
			"MOV     R0, R4\n"
			"BL      sub_FFAE2ED4\n"
			"LDMFD   SP!, {R3-R7,PC}\n"
					);
}


//--------------------------- apexus stuff-------------------
//FF8CCA88
void __attribute__((naked,noinline)) exp_drv_task() {
	asm volatile(
"		STMFD	SP!, {R4-R8,LR}\n"
"		SUB	SP, SP,	#0x20\n"
"		LDR	R8, =0xBB8\n"
"		LDR	R7, =0x4C6C\n"
"		LDR	R5, =0x58054\n"
"		MOV	R0, #0\n"
"		ADD	R6, SP,	#0x10\n"
"		STR	R0, [SP,#0xC]\n"
"loc_FF8CCAA8:\n"
"		LDR	R0, [R7,#0x20]\n"
"		MOV	R2, #0\n"
"		ADD	R1, SP,	#0x1C\n"
"		BL	sub_FF83AE20\n"  //__KerQueue.c__0 ; LOCATION: KerQueue.c:0
"		LDR	R0, [SP,#0xC]\n"
"		CMP	R0, #1\n"
"		BNE	loc_FF8CCAF4\n"
"		LDR	R0, [SP,#0x1C]\n"
"		LDR	R0, [R0]\n"
"		CMP	R0, #0x14\n"
"		CMPNE	R0, #0x15\n"
"		CMPNE	R0, #0x16\n"
"		CMPNE	R0, #0x17\n"
"		BEQ	loc_FF8CCC58\n"
"		CMP	R0, #0x29\n"
"		BEQ	loc_FF8CCBE0\n"
"		ADD	R1, SP,	#0xC\n"
"		MOV	R0, #0\n"
"		BL	sub_FF8CCA38\n"  //__ExpDrv.c__512 ; LOCATION: ExpDrv.c:512
"loc_FF8CCAF4:\n"
"		LDR	R0, [SP,#0x1C]\n"
"		LDR	R1, [R0]\n"
"		CMP	R1, #0x2F\n"
"		BNE	loc_FF8CCB24\n"
"		LDR	R0, [SP,#0x1C]\n"
"		BL	sub_FF8CDE38\n"  //__ExpDrv.c__0 ; LOCATION: ExpDrv.c:0
"		LDR	R0, [R7,#0x1C]\n"
"		MOV	R1, #1\n"
"		BL	sub_FF88DB8C\n"
"		BL	sub_FF81EB30\n" //ExitTask	; LOCATION: KerTask.c:0
"		ADD	SP, SP,	#0x20\n"
"		LDMFD	SP!, {R4-R8,PC}\n"
"loc_FF8CCB24:\n"
"		CMP	R1, #0x2E\n"
"		BNE	loc_FF8CCB40\n"
"		LDR	R2, [R0,#0x8C]!\n"
"		LDR	R1, [R0,#4]\n"
"		MOV	R0, R1\n"
"		BLX	R2\n"
"		B	loc_FF8CD120\n"
"loc_FF8CCB40:\n"
"		CMP	R1, #0x27\n"
"		BNE	loc_FF8CCB90\n"
"		LDR	R0, [R7,#0x1C]\n"
"		MOV	R1, #0x80\n"
"		BL	sub_FF88DBC0\n"
"		LDR	R0, =0xFF8C8848\n"
"		MOV	R1, #0x80\n"
"		BL	sub_FF974434\n"  //__IrisController.c__116 ; LOCATION: IrisController.c:116
"		LDR	R0, [R7,#0x1C]\n"
"		MOV	R2, R8\n"
"		MOV	R1, #0x80\n"
"		BL	sub_FF88DACC\n"  //__KerFlag.c__0 ; LOCATION:	KerFlag.c:0
"		TST	R0, #1\n"
"		LDRNE	R1, =0x1089\n"
"		BNE	loc_FF8CCC4C\n"
"loc_FF8CCB7C:\n"
"		LDR	R1, [SP,#0x1C]\n"
"		LDR	R0, [R1,#0x90]\n"
"		LDR	R1, [R1,#0x8C]\n"
"		BLX	R1\n"
"		B	loc_FF8CD120\n"
"loc_FF8CCB90:\n"
"		CMP	R1, #0x28\n"
"		BNE	loc_FF8CCBD8\n"
"		ADD	R1, SP,	#0xC\n"
"		BL	sub_FF8CCA38\n"  //__ExpDrv.c__512 ; LOCATION: ExpDrv.c:512
"		LDR	R0, [R7,#0x1C]\n"
"		MOV	R1, #0x100\n"
"		BL	sub_FF88DBC0\n"
"		LDR	R0, =0xFF8C8858\n"
"		MOV	R1, #0x100\n"
"		BL	sub_FF974DC4\n"  //__IrisController.c__0 ; LOCATION: IrisController.c:0
"		LDR	R0, [R7,#0x1C]\n"
"		MOV	R2, R8\n"
"		MOV	R1, #0x100\n"
"		BL	sub_FF88DACC\n"  //__KerFlag.c__0 ; LOCATION:	KerFlag.c:0
"		TST	R0, #1\n"
"		BEQ	loc_FF8CCB7C\n"
"		LDR	R1, =0x1093\n"
"		B	loc_FF8CCC4C\n"
"loc_FF8CCBD8:\n"
"		CMP	R1, #0x29\n"
"		BNE	loc_FF8CCBF0\n"
"loc_FF8CCBE0:\n"
"		LDR	R0, [SP,#0x1C]\n"
"		ADD	R1, SP,	#0xC\n"
"		BL	sub_FF8CCA38\n" //__ExpDrv.c__512 ; LOCATION: ExpDrv.c:512
"		B	loc_FF8CCB7C\n"
"loc_FF8CCBF0:\n"
"		CMP	R1, #0x2C\n"
"		BNE	loc_FF8CCC08\n"
"		BL	sub_FF8BA634\n"  //__Shutter.c__2 ; LOCATION:	Shutter.c:2
"		BL	sub_FF8BB250\n"  // __ImgPixel.c__272 ; LOCATION: ImgPixel.c:272
"		BL	sub_FF8BADBC\n"  //__ImgGain.c__0 ; LOCATION:	ImgGain.c:0
"		B	loc_FF8CCB7C\n"
"loc_FF8CCC08:\n"
"		CMP	R1, #0x2D\n"
"		BNE	loc_FF8CCC58\n"
"		LDR	R0, [R7,#0x1C]\n"
"		MOV	R1, #4\n"
"		BL	sub_FF88DBC0\n"
"		LDR	R1, =0xFF8C8878\n"
"		LDR	R0, =0xFFFFF400\n"
"		MOV	R2, #4\n"
"		BL	sub_FF8BA0B0\n"
"		BL	sub_FF8BA338\n"  //__Shutter.c__0 ; LOCATION:	Shutter.c:0
"		LDR	R0, [R7,#0x1C]\n"
"		MOV	R2, R8\n"
"		MOV	R1, #4\n"
"		BL	sub_FF88D9E8\n"  // __KerFlag.c__0 ; LOCATION:	KerFlag.c:0
"		TST	R0, #1\n"
"		BEQ	loc_FF8CCB7C\n"
"		LDR	R1, =0x10BB\n"
"loc_FF8CCC4C:\n"
"		LDR	R0, =0xFF8C8F48\n"  //aExpdrv_c
"		BL	sub_FF81EB78\n"  //DebugAssert
"		B	loc_FF8CCB7C\n"
"loc_FF8CCC58:\n"
"		LDR	R0, [SP,#0x1C]\n"
"		MOV	R4, #1\n"
"		LDR	R1, [R0]\n"
"		CMP	R1, #0x12\n"
"		CMPNE	R1, #0x13\n"
"		BNE	loc_FF8CCCC8\n"
"		LDR	R1, [R0,#0x7C]\n"
"		ADD	R1, R1,	R1,LSL#1\n"
"		ADD	R1, R0,	R1,LSL#2\n"
"		SUB	R1, R1,	#8\n"
"		LDMIA	R1, {R2-R4}\n"
"		STMIA	R6, {R2-R4}\n"
"		BL	sub_FF8CB1C0\n"  // __ExpDrv.c__2 ; LOCATION: ExpDrv.c:2
"		LDR	R0, [SP,#0x1C]\n"
"		LDR	R1, [R0,#0x7C]\n"
"		LDR	R3, [R0,#0x8C]\n"
"		LDR	R2, [R0,#0x90]\n"
"		ADD	R0, R0,	#4\n"
"		BLX	R3\n"
"		LDR	R0, [SP,#0x1C]\n"
"		BL	sub_FF8CE240\n"  //__ExpDrv.c__0 ; LOCATION: ExpDrv.c:0
"		LDR	R0, [SP,#0x1C]\n"
"		LDR	R1, [R0,#0x7C]\n"
"		LDR	R3, [R0,#0x94]\n"
"		LDR	R2, [R0,#0x98]\n"
"		ADD	R0, R0,	#4\n"
"		BLX	R3\n"
"		B	loc_FF8CD05C\n"
"loc_FF8CCCC8:\n"
"		CMP	R1, #0x14\n"
"		CMPNE	R1, #0x15\n"
"		CMPNE	R1, #0x16\n"
"		CMPNE	R1, #0x17\n"
"		BNE	loc_FF8CCD80\n"
"		ADD	R3, SP,	#0xC\n"
"		MOV	R2, SP\n"
"		ADD	R1, SP,	#0x10\n"
"		BL	sub_FF8CB42C\n"   // __ExpDrv.c__3168 ;	LOCATION: ExpDrv.c:3168
"		CMP	R0, #1\n"
"		MOV	R4, R0\n"
"		CMPNE	R4, #5\n"
"		BNE	loc_FF8CCD1C\n"
"		LDR	R0, [SP,#0x1C]\n"
"		MOV	R2, R4\n"
"		LDR	R1, [R0,#0x7C]!\n"
"		LDR	R12, [R0,#0x10]!\n"
"		LDR	R3, [R0,#4]\n"
"		MOV	R0, SP\n"
"		BLX	R12\n"
"		B	loc_FF8CCD54\n"
"loc_FF8CCD1C:\n"
"		LDR	R0, [SP,#0x1C]\n"
"		CMP	R4, #2\n"
"		LDR	R3, [R0,#0x90]\n"
"		CMPNE	R4, #6\n"
"		BNE	loc_FF8CCD68\n"
"		LDR	R12, [R0,#0x8C]\n"
"		MOV	R0, SP\n"
"		MOV	R2, R4\n"
"		MOV	R1, #1\n"
"		BLX	R12\n"
"		LDR	R0, [SP,#0x1C]\n"
"		MOV	R2, SP\n"
"		ADD	R1, SP,	#0x10\n"
"		BL	sub_FF8CC784\n"  // __ExpDrv.c__0 ; LOCATION: ExpDrv.c:0
"loc_FF8CCD54:\n"
"		LDR	R0, [SP,#0x1C]\n"
"		LDR	R2, [SP,#0xC]\n"
"		MOV	R1, R4\n"
"		BL	sub_FF8CC9D8\n"  // __ExpDrv.c__2 ; LOCATION: ExpDrv.c:2
"		B	loc_FF8CD05C\n"
"loc_FF8CCD68:\n"
"		LDR	R1, [R0,#0x7C]\n"
"		LDR	R12, [R0,#0x8C]\n"
"		ADD	R0, R0,	#4\n"
"		MOV	R2, R4\n"
"		BLX	R12\n"
"		B	loc_FF8CD05C\n"
"loc_FF8CCD80:\n"
"		CMP	R1, #0x23\n"
"		CMPNE	R1, #0x24\n"
"		BNE	loc_FF8CCDCC\n"
"		LDR	R1, [R0,#0x7C]\n"
"		ADD	R1, R1,	R1,LSL#1\n"
"		ADD	R1, R0,	R1,LSL#2\n"
"		SUB	R1, R1,	#8\n"
"		LDMIA	R1, {R2-R4}\n"
"		STMIA	R6, {R2-R4}\n"
"		BL	sub_FF8CA234\n"  // __ExpDrv.c__2064 ;	LOCATION: ExpDrv.c:2064
"		LDR	R0, [SP,#0x1C]\n"
"		LDR	R1, [R0,#0x7C]\n"
"		LDR	R3, [R0,#0x8C]\n"
"		LDR	R2, [R0,#0x90]\n"
"		ADD	R0, R0,	#4\n"
"		BLX	R3\n"
"		LDR	R0, [SP,#0x1C]\n"
"		BL	sub_FF8CA680\n"  // __ExpDrv.c__0 ; LOCATION: ExpDrv.c:0
"		B	loc_FF8CD05C\n"
"loc_FF8CCDCC:\n"
"		ADD	R1, R0,	#4\n"
"		LDMIA	R1, {R2,R3,R12}\n"
"		STMIA	R6, {R2,R3,R12}\n"
"		LDR	R1, [R0]\n"
"		CMP	R1, #0x26\n"
"		ADDLS	PC, PC,	R1,LSL#2\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCDE8:\n"
"		B	loc_FF8CCE84\n"
"loc_FF8CCDEC:\n"
"		B	loc_FF8CCE84\n"
"loc_FF8CCDF0:\n"
"		B	loc_FF8CCE8C\n"
"loc_FF8CCDF4:\n"
"		B	loc_FF8CCE94\n"
"loc_FF8CCDF8:\n"
"		B	loc_FF8CCE94\n"
"loc_FF8CCDFC:\n"
"		B	loc_FF8CCE94\n"
"loc_FF8CCE00:\n"
"		B	loc_FF8CCE84\n"
"loc_FF8CCE04:\n"
"		B	loc_FF8CCE8C\n"
"loc_FF8CCE08:\n"
"		B	loc_FF8CCE94\n"
"loc_FF8CCE0C:\n"
"		B	loc_FF8CCE94\n"
"loc_FF8CCE10:\n"
"		B	loc_FF8CCEAC\n"
"loc_FF8CCE14:\n"
"		B	loc_FF8CCEAC\n"
"loc_FF8CCE18:\n"
"		B	loc_FF8CD028\n"
"loc_FF8CCE1C:\n"
"		B	loc_FF8CD030\n"
"loc_FF8CCE20:\n"
"		B	loc_FF8CD030\n"
"loc_FF8CCE24:\n"
"		B	loc_FF8CD030\n"
"loc_FF8CCE28:\n"
"		B	loc_FF8CD030\n"
"loc_FF8CCE2C:\n"
"		B	loc_FF8CD038\n"
"loc_FF8CCE30:\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCE34:\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCE38:\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCE3C:\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCE40:\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCE44:\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCE48:\n"
"		B	loc_FF8CCE9C\n"
"loc_FF8CCE4C:\n"
"		B	loc_FF8CCEA4\n"
"loc_FF8CCE50:\n"
"		B	loc_FF8CCEA4\n"
"loc_FF8CCE54:\n"
"		B	loc_FF8CCEB8\n"
"loc_FF8CCE58:\n"
"		B	loc_FF8CCEB8\n"
"loc_FF8CCE5C:\n"
"		B	loc_FF8CCEC0\n"
"loc_FF8CCE60:\n"
"		B	loc_FF8CCEF8\n"
"loc_FF8CCE64:\n"
"		B	loc_FF8CCFA0\n"
"loc_FF8CCE68:\n"
"		B	loc_FF8CCFD8\n"
"loc_FF8CCE6C:\n"
"		B	loc_FF8CD010\n"
"loc_FF8CCE70:\n"
"		B	loc_FF8CD010\n"
"loc_FF8CCE74:\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCE78:\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCE7C:\n"
"		B	loc_FF8CD018\n"
"loc_FF8CCE80:\n"
"		B	loc_FF8CD020\n"
"loc_FF8CCE84:\n"
"		BL	sub_FF8C8D88\n" //__ExpDrv.c__0
"		B	loc_FF8CD03C\n"
"loc_FF8CCE8C:\n"
"		BL	sub_FF8C9078\n"  //__ExpDrv.c__0
"		B	loc_FF8CD03C\n"
"loc_FF8CCE94:\n"
"		BL	sub_FF8C92E0\n"  //__ExpDrv.c__9
"		B	loc_FF8CD03C\n"
"loc_FF8CCE9C:\n"
"		BL	sub_FF8C9594\n"  //__ExpDrv.c__2
"		B	loc_FF8CD03C\n"
"loc_FF8CCEA4:\n"
"		BL	sub_FF8C97AC\n" //__ExpDrv.c__0
"		B	loc_FF8CD03C\n"
"loc_FF8CCEAC:\n"
//"		BL	sub_FF8C9AD0\n"   // the one to override------------------------------
"		BL	sub_FF8C9AD0_my\n"   // first step for apexus
							//----------------------->
"		MOV	R4, #0\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCEB8:\n"
"		BL	sub_FF8C9C18\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCEC0:\n"
"		LDRH	R1, [R0,#4]\n"
"		STRH	R1, [SP,#0x10]\n"
"		LDRH	R1, [R5,#2]\n"
"		STRH	R1, [SP,#0x12]\n"
"		LDRH	R1, [R5,#4]\n"
"		STRH	R1, [SP,#0x14]\n"
"		LDRH	R1, [R5,#6]\n"
"		STRH	R1, [SP,#0x16]\n"
"		LDRH	R1, [R0,#0xC]\n"
"		STRH	R1, [SP,#0x18]\n"
"		LDRH	R1, [R5,#0xA]\n"
"		STRH	R1, [SP,#0x1A]\n"
"		BL	sub_FF8CDF38\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCEF8:\n"
"		LDRH	R1, [R0,#4]\n"
"		STRH	R1, [SP,#0x10]\n"
"		LDRH	R1, [R5,#2]\n"
"		STRH	R1, [SP,#0x12]\n"
"		LDRH	R1, [R5,#4]\n"
"		STRH	R1, [SP,#0x14]\n"
"		LDRH	R1, [R5,#6]\n"
"		STRH	R1, [SP,#0x16]\n"
"		LDRH	R1, [R0,#8]\n"
"		STRH	R1, [SP,#0x18]\n"
"		LDRH	R1, [R5,#0xA]\n"
"		STRH	R1, [SP,#0x1A]\n"
"		BL	sub_FF8CE040\n"
"		B	loc_FF8CD03C\n"


"loc_FF8CCFA0:\n"
"       LDRH    R1, [R5]\n"
"		STRH	R1, [SP,#0x10]\n"
"		LDRH	R1, [R5,#6]\n"
"		STRH	R1, [SP,#0x12]\n"
"		LDRH	R1, [R5,#4]\n"
"		STRH	R1, [SP,#0x14]\n"
"		LDRH	R1, [R5,#6]\n"
"		STRH	R1, [SP,#0x16]\n"
"		LDRH	R1, [R0,#8]\n"
"		STRH	R1, [SP,#0x18]\n"
"		LDRH	R1, [R5,#0xA]\n"
"		STRH	R1, [SP,#0x1A]\n"
"		BL	sub_FF8CE0F4\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CCFD8:\n"
"       LDRH    R1, [R5]\n"
"		STRH	R1, [SP,#0x10]\n"
"		LDRH	R1, [R5,#2]\n"
"		STRH	R1, [SP,#0x12]\n"
"		LDRH	R1, [R5,#4]\n"
"		STRH	R1, [SP,#0x14]\n"
"		LDRH	R1, [R5,#6]\n"
"		STRH	R1, [SP,#0x16]\n"
"		LDRH	R1, [R0,#0xC]\n"
"		STRH	R1, [SP,#0x18]\n"
"		LDRH	R1, [R5,#0xA]\n"
"		STRH	R1, [SP,#0x1A]\n"
"		BL	sub_FF8CE19C\n"
"		B	loc_FF8CD03C\n"

"loc_FF8CD010:\n"
"		BL	sub_FF8CA00C\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CD018:\n"
"		BL	sub_FF8CA784\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CD020:\n"
"		BL	sub_FF8CAA20\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CD028:\n"
"		BL	sub_FF8CAC00\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CD030:\n"
"		BL	sub_FF8CADBC\n"
"		B	loc_FF8CD03C\n"
"loc_FF8CD038:\n"
"		BL	sub_FF8CAFB8\n"
"loc_FF8CD03C:\n"
"		LDR	R0, [SP,#0x1C]\n"
"		LDR	R1, [R0,#0x7C]\n"
"		LDR	R3, [R0,#0x8C]\n"
"		LDR	R2, [R0,#0x90]\n"
"		ADD	R0, R0,	#4\n"
"		BLX	R3\n"
"		CMP	R4, #1\n"
"		BNE	loc_FF8CD0A4\n"
"loc_FF8CD05C:\n"
"		LDR	R0, [SP,#0x1C]\n"
"		MOV	R2, #0xC\n"
"		LDR	R1, [R0,#0x7C]\n"
"		ADD	R1, R1,	R1,LSL#1\n"
"		ADD	R0, R0,	R1,LSL#2\n"
"		SUB	R4, R0,	#8\n"
"		LDR	R0, =0x58054\n"
"		ADD	R1, SP,	#0x10\n"
"		BL	sub_FFB872F4\n"
"		LDR	R0, =0x58060\n"
"		MOV	R2, #0xC\n"
"		ADD	R1, SP,	#0x10\n"
"		BL	sub_FFB872F4\n"
"		LDR	R0, =0x5806C\n"
"		MOV	R2, #0xC\n"
"		MOV	R1, R4\n"
"		BL	sub_FFB872F0\n"  //F4 in 100F
"		B	loc_FF8CD120\n"
"loc_FF8CD0A4:\n"
"		LDR	R0, [SP,#0x1C]\n"
"		MOV	R3, #1\n"
"		LDR	R0, [R0]\n"
"		CMP	R0, #0xB\n"
"		BNE	loc_FF8CD0EC\n"
"		MOV	R2, #0\n"
"		STRD	R2, [SP]\n"
"		MOV	R2, #1\n"
"		MOV	R1, #1\n"
"		MOV	R0, #0\n"
"		BL	sub_FF8C8B68\n"
"		MOV	R3, #1\n"
"		MOV	R2, #0\n"
"		STRD	R2, [SP]\n"
"		MOV	R2, #1\n"
"		MOV	R1, #1\n"
"		MOV	R0, #0\n"
"		B	loc_FF8CD11C\n"
"loc_FF8CD0EC:\n"
"		MOV	R2, #1\n"
"		STRD	R2, [SP]\n"
"		MOV	R3, #1\n"
"		MOV	R1, #1\n"
"		MOV	R0, #1\n"
"		BL	sub_FF8C8B68\n"
"		MOV	R3, #1\n"
"		MOV	R2, #1\n"
"		MOV	R1, #1\n"
"		MOV	R0, #1\n"
"		STR	R3, [SP]\n"
"		STR	R3, [SP,#4]\n"
"loc_FF8CD11C:\n"
"		BL	sub_FF8C8CD0\n"
"loc_FF8CD120:\n"
"		LDR	R0, [SP,#0x1C]\n"
"		BL	sub_FF8CDE38\n"
"		B	loc_FF8CCAA8\n"
					);
}

void __attribute__((naked,noinline)) sub_FF8C9AD0_my() {
	asm volatile (
"		STMFD	SP!, {R4-R8,LR}\n"
"		LDR	R7, =0x4C6C\n"
"		MOV	R4, R0\n"
"		LDR	R0, [R7,#0x1C]\n"
"		MOV	R1, #0x3E\n"
"		BL	sub_FF88DBC0\n"
"		LDRSH	R0, [R4,#4]\n"
"		MOV	R2, #0\n"
"		MOV	R1, #0\n"
"		BL	sub_FF8C88CC\n"
"		MOV	R5, R0\n"
"		LDRSH	R0, [R4,#6]\n"
"		BL	sub_FF8C89DC\n"
"		LDRSH	R0, [R4,#8]\n"
"		BL	sub_FF8C8A34\n"
"		LDRSH	R0, [R4,#0xA]\n"
"		BL	sub_FF8C8A8C\n"
"		LDRSH	R0, [R4,#0xC]\n"
"		MOV	R1, #0\n"
"		BL	sub_FF8C8AE4\n"
"		MOV	R6, R0\n"
"		LDRSH	R0, [R4,#0xE]\n"
"		BL	sub_FF8CDED8\n"
"		LDR	R0, [R4]\n"
"		LDR	R8, =0x5806C\n"
"		CMP	R0, #0xB\n"
"		MOVEQ	R5, #0\n"
"		MOVEQ	R6, #0\n"
"		BEQ	loc_FF8C9B6C\n"
"		CMP	R5, #1\n"
"		BNE	loc_FF8C9B6C\n"
"		LDRSH	R0, [R4,#4]\n"
"		LDR	R1, =0xFF8C8838\n"
"		MOV	R2, #2\n"
"		BL	sub_FF974780\n"  //__IrisController.c__190 ; LOCATION: IrisController.c:190
"		STRH	R0, [R4,#4]\n"
"		MOV	R0, #0\n"
"		STR	R0, [R7,#0x28]\n"
"		B	loc_FF8C9B74\n"
"loc_FF8C9B6C:\n"
"		LDRH	R0, [R8]\n"
"		STRH	R0, [R4,#4]\n"
"loc_FF8C9B74:\n"
"		CMP	R6, #1\n"
"		LDRNEH	R0, [R8,#8]\n"
"		BNE	loc_FF8C9B90\n"
"		LDRSH	R0, [R4,#0xC]\n"
"		LDR	R1, =0xFF8C88BC\n"
"		MOV	R2, #0x20\n"
"		BL	sub_FF8CDEF4\n"
"loc_FF8C9B90:\n"
"		STRH	R0, [R4,#0xC]\n"
"		LDRSH	R0, [R4,#6]\n"
//"		BL	sub_FF8BA3A4\n"  // last step __Shutter.c__0 ; LOCATION:	Shutter.c:0
"		BL	sub_FF8BA3A4_my\n"
		//------------------------>
"B      sub_FF8C9B9C\n" // Continue function in firmware

/*
"		LDRSH	R0, [R4,#8]\n"
"		MOV	R1, #1\n"
"		BL	_sub_FF8BAB04__ImgGain.c__0 ; LOCATION:	ImgGain.c:0\n"
"		MOV	R1, #0\n"
"		ADD	R0, R4,	#8\n"
"		BL	_sub_FF8BAB8C__ImgGain.c__352 ;	LOCATION: ImgGain.c:352\n"
"		LDRSH	R0, [R4,#0xE]\n"
"		BL	_sub_FF8C37D0__BrtCrct.c__0 ; LOCATION:	BrtCrct.c:0\n"
"		LDR	R4, =0xBB8\n"
"		CMP	R5, #1\n"
"		BNE	loc_FF8C9BE8\n"
"		LDR	R0, [R7,#0x1C]\n"
"		MOV	R2, R4\n"
"		MOV	R1, #2\n"
"		BL	_sub_FF88DACC__KerFlag.c__0 ; LOCATION:	KerFlag.c:0\n"
"		TST	R0, #1\n"
"		LDRNE	R1, =0x61E\n"
"		ADRNE	R0, aExpdrv_c	; "ExpDrv.c"\n"
"		BLNE	DebugAssert\n"
"\n"
"loc_FF8C9BE8				; CODE XREF: _sub_FF8C9AD0__ExpDrv.c__2+F4j\n"
"		CMP	R6, #1\n"
"		LDMNEFD	SP!, {R4-R8,PC}\n"
"		LDR	R0, [R7,#0x1C]\n"
"		MOV	R2, R4\n"
"		MOV	R1, #0x20\n"
"		BL	_sub_FF88DACC__KerFlag.c__0 ; LOCATION:	KerFlag.c:0\n"
"		TST	R0, #1\n"
"		LDRNE	R1, =0x623\n"
"		LDRNE	R0, =aExpdrv_c\n"
"		LDMNEFD	SP!, {R4-R8,LR}\n"
"		BNE	DebugAssert\n"
"		LDMFD	SP!, {R4-R8,PC}\n"
*/

				);
}



void __attribute__((naked,noinline)) sub_FF8BA3A4_my() {
	asm volatile (
"		STMFD	SP!, {R4-R6,LR}\n"
"		LDR	R5, =0x4934\n"
"		MOV	R4, R0\n"
"		LDR	R0, [R5,#4]\n"
"		CMP	R0, #1\n"
"		LDRNE	R1, =0x146\n"
"		LDRNE	R0, =0xFF8BA1A8\n"  //	Shutter.c
"		BLNE	sub_FF81EB78\n"  //DebugAssert
"		CMN	R4, #0xC00\n"
"		LDREQSH	R4, [R5,#2]\n"
"		CMN	R4, #0xC00\n"
"		MOVEQ	R1, #0x14C\n"
"		LDREQ	R0, =0xFF8BA1A8\n"  //	Shutter.c
"		STRH	R4, [R5,#2]\n"
"		BLEQ	sub_FF81EB78\n"  //DebugAssert
"		MOV	R0, R4\n"
"		BL	apex2us\n"  //++
"		MOV	R4, R0\n"
"		BL	sub_FF90667C\n"  //nullsub_68
"		MOV	R0, R4\n"
"		BL	sub_FF910AF8\n"
"		TST	R0, #1\n"
"		LDRNE	R1, =0x151\n"
"		LDMNEFD	SP!, {R4-R6,LR}\n"
"		LDRNE	R0, =0xFF8BA1A8\n"  //	Shutter.c
"		BNE	sub_FF81EB78\n"  //DebugAssert
"		LDMFD	SP!, {R4-R6,PC}\n"

				);
}
